p0 <- ggplot(
data = filter(county_data,
flipped == "No"),
mapping =
aes(x = pop,
y = black/100) )
p1 <- p0 +
geom_point(alpha = 0.15,
color = "gray50")+
scale_x_log10(labels=scales::comma)
p1
p2 <- p1 +
geom_point(
data = filter(county_data,
flipped == "Yes"),
mapping =
aes(x = pop, y = black/100,
color = partywinner16)) +
scale_color_manual(
values = party_colors)
p2
View(by_country)
View(by_country)
View(county_data)
View(county_data)
p3 <- p2 +
scale_y_continuous(
labels=scales::percent) +
labs(
color =
"County flipped to ... ",
x =
"County Population (log scale)",
y =
"Percent Black Population",
title =
"Flipped counties, 2016",
caption =
"Counties in gray did not flip.")
p3
p4 <- p3 +
geom_text_repel(
data =
filter(
county_data,
flipped == "Yes" & black >25),
mapping =
aes(x = pop, y = black/100,
label = state),
size = 2)
p4 + theme_minimal() +
theme(legend.position="top")
# DEM Blue and REP Red
party_colors <-
c("#2E74C0", "#CB454A")
p0 <- ggplot(
data = filter(county_data,
flipped == "No"),
mapping =
aes(x = pop,
y = black/100) )
p1 <- p0 +
geom_point(alpha = 0.15,
color = "gray50")
p1
p4 + theme_economist() +
theme(legend.position = "top")
p4 + theme_economist() +
theme(legend.position = "top")
p4 + theme_wsj() +
theme(
plot.title =
element_text(size = rel(0.6)),
legend.title =
element_text(size = rel(0.35)),
plot.caption =
element_text(size = rel(0.35)),
legend.position = "top")
p4 + theme(
legend.position = "top",
plot.title = element_text(
size = rel(2),
lineheight = .5,
family = "Times",
face = "bold.italic",
color = "orange"),
axis.text.x = element_text(
size = rel(1.1),
family = "Courier",
face = "bold",
color = "purple")
)
p4 + theme(
legend.position = "top",
plot.title = element_text(
size = rel(2),
lineheight = .5,
family = "Times",
face = "bold.italic",
color = "orange"),
axis.text.x = element_text(
size = rel(1.1),
family = "Courier",
face = "bold",
color = "purple")
)
p4 + theme(
legend.position = "top",
plot.title = element_text(
size = rel(2),
lineheight = .5,
family = "Times", # fonts not found, but this is how to set font type
face = "bold.italic", # how to set bolt/italic or both
color = "orange"),
axis.text.x = element_text(
size = rel(1.1),
family = "Courier",
face = "bold",
color = "purple")
)
p4 + theme(
legend.position = "top",
plot.title = element_text(
size = rel(2),
lineheight = .5,
family = "Times",
face = "bold.italic",
colour = "orange"),
axis.text.x = element_blank()
)
p4 + theme(
legend.position = "top",
plot.title = element_text(
size = rel(2),
lineheight = .5,
family = "Times",
face = "bold.italic",
colour = "orange"),
axis.text.x = element_blank()
)
gss_lon <- socviz::gss_lon
yrs <- c(seq(1972, 1988, 4),
1993,
seq(1996, 2016, 4))
mean_age <- gss_lon |>
filter( !is.na(age),
year %in% yrs) |>
group_by(year) |>
summarize(
xbar = round(
mean(age, na.rm = TRUE), 0)
)
mean_age$y <- 0.3
yr_labs <- data.frame(
x = 85, y = 0.8,
year = yrs)  # to position the age as a text label
View(mean_age)
View(mean_age)
View(yr_labs)
View(yr_labs)
p <- ggplot(
data =
filter(gss_lon, year %in% yrs),
mapping =
aes(x = age))
p1 <- p +
geom_density(
fill = "black", color = FALSE,
alpha = 0.9,
mapping = aes(y = ..scaled..))
p1
p2 <- p1 +
geom_vline(
data = filter(
mean_age, year %in% yrs),
aes(xintercept = xbar),
color = "white", size = 0.5) +
geom_text(
data = filter(mean_age,
year %in% yrs),
aes(x = xbar, y = y, label = xbar),
nudge_x = 7.5, color = "white",
size = 3.5, hjust = 1) +
geom_text(data = filter(
yr_labs, year %in% yrs),
aes(x = x, y = y, label = year))
p2
p2 <- p1 +
geom_vline(
data = filter(
mean_age, year %in% yrs),
aes(xintercept = xbar),
color = "white", linewidth = 0.5) +
geom_text(
data = filter(mean_age,
year %in% yrs),
aes(x = xbar, y = y, label = xbar),
nudge_x = 7.5, color = "white",
size = 3.5, hjust = 1) +
geom_text(data = filter(
yr_labs, year %in% yrs),
aes(x = x, y = y, label = year))
p2
p3 <- p2  +
facet_grid(year ~ ., switch = "y")
p3
p <- ggplot(
data =
filter(gss_lon, year %in% yrs),
mapping =
aes(x = age))
p1 <- p +
geom_density(
fill = "black", color = FALSE,
alpha = 0.9,
mapping = aes(y = ..scaled..))
p1
p3 <- p2  +
facet_grid(year ~ ., switch = "y")
p3
p2a <- p3 +
theme(
plot.title =
element_text(size = 16),
axis.text.x=
element_text(size = 12),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y = element_blank(),
strip.background = element_blank(),
strip.text.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank()) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents")
p2a
# install.packages("ggridges")
library(ggridges)
p2a <- p3 +
theme(
plot.title =
element_text(size = 16),
axis.text.x=
element_text(size = 12),
axis.title.y=element_blank(),
axis.text.y=element_blank(),
axis.ticks.y = element_blank(),
strip.background = element_blank(),
strip.text.y = element_blank(),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank()) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents")
p2a
p2b <- p +
geom_density_ridges(
alpha = 0.6, fill = "lightblue",
scale = 1.5) +
scale_x_continuous(
breaks = c(25, 50, 75)) +
scale_y_discrete(
expand = c(0.01, 0)) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents") +
theme_ridges() +  # make labels aligned properly
theme(
title =
element_text(
size = 16, face = "bold"))
p2b
p2b <- p +
geom_density_ridges(
alpha = 0.6, fill = "lightblue",
scale = 1.5) +
scale_x_continuous(
breaks = c(25, 50, 75)) +
scale_y_discrete(
expand = c(0.01, 0)) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents") +
theme_ridges() +  # make labels aligned properly
theme(
title =
element_text(
size = 16, face = "bold"))
p2b
p2b <- p +
geom_density_ridges(
alpha = 0.6, fill = "lightblue",
scale = 1.5) +
scale_x_continuous(
breaks = c(25, 50, 75)) +
scale_y_discrete(
expand = c(0.01, 0)) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents") +
theme_ridges() +  # make labels aligned properly
theme(
title =
element_text(
size = 16, face = "bold"))
p2b
p <- ggplot(
data =
filter(gss_lon, year %in% yrs),
mapping =
aes(x = age))
p2b <- p +
geom_density_ridges(
alpha = 0.6, fill = "lightblue",
scale = 1.5) +
scale_x_continuous(
breaks = c(25, 50, 75)) +
scale_y_discrete(
expand = c(0.01, 0)) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents") +
theme_ridges() +  # make labels aligned properly
theme(
title =
element_text(
size = 16, face = "bold"))
p2b
p <- ggplot(
data =
filter(gss_lon, year %in% yrs),
mapping =
aes(x = age, y = year))
p2b <- p +
geom_density_ridges(
alpha = 0.6, fill = "lightblue",
scale = 1.5) +
scale_x_continuous(
breaks = c(25, 50, 75)) +
scale_y_discrete(
expand = c(0.01, 0)) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents") +
theme_ridges() +  # make labels aligned properly
theme(
title =
element_text(
size = 16, face = "bold"))
p2b
p <- ggplot(
data =
filter(gss_lon, year %in% yrs),
mapping =
aes(x = age))
p2b <- p +
geom_density_ridges(
alpha = 0.6, fill = "lightblue",
scale = 1.5,
mapping = aes(y = factor(year, levels = rev(unique(year)), ordered = TRUE) +
scale_x_continuous(
breaks = c(25, 50, 75)) +
scale_y_discrete(
expand = c(0.01, 0)) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents") +
theme_ridges() +  # make labels aligned properly
theme(
title =
element_text(
size = 16, face = "bold"))
p2b
p <- ggplot(
data =
filter(gss_lon, year %in% yrs),
mapping =
aes(x = age))
p2b <- p +
geom_density_ridges(
alpha = 0.6, fill = "lightblue",
scale = 1.5,
mapping = aes(y = factor(year, levels = rev(unique(year)), ordered = TRUE))) +
scale_x_continuous(
breaks = c(25, 50, 75)) +
scale_y_discrete(
expand = c(0.01, 0)) +
labs(x = "Age", y = NULL,
title =
"Age Distribution of\nGSS Respondents") +
theme_ridges() +  # make labels aligned properly
theme(
title =
element_text(
size = 16, face = "bold"))
p2b
install.packages("gridExtra")
grid.arrange(p2a, p2b, nrow = 1)   # sub-figures
library(gridExtra)
grid.arrange(p2a, p2b, nrow = 1)   # sub-figures
library(gridExtra)
grid.arrange(p2a, p2b, nrow = 1)   # sub-figures
studebt
p_xlab <- "Amount Owed, in thousands of Dollars"
p_title <- "Outstanding Student Loans"
p_subtitle <- "44 million borrowers owe a total of $1.3 trillion"
p_caption <- "Source: FRB NY"
f_labs <- c(`Borrowers` = "Percent of\nall Borrowers",
`Balances` = "Percent of\nall Balances")
p <- ggplot(
data = studebt,
mapping =
aes(x = pct/100, y = Debt,
fill = type))
p1 <- p + geom_col()
p1
p2 <- p1 +
scale_fill_brewer(
type = "qual", palette = "Dark2")
p2
p3 <- p2 +
scale_x_continuous(
labels = scales::percent)
p3
p4 <- p3 +
guides(fill = FALSE)
p4
p5 <- p4 +
facet_grid(
.~ type,
labeller = as_labeller(f_labs))
p5
p6 <- p5 +
labs(y = NULL, x = p_xlab,
caption = p_caption,
title = p_title,
subtitle = p_subtitle)
p6
p7 <- p6 +
theme(strip.text.x =
element_text(face = "bold"))
p7
p2 <- p1 +
scale_y_discrete(
labels = as_labeller(f_labs))
p2
p <- ggplot(
studebt,
aes(x = pct/100, y = type,
fill = Debtrc))
p1 <- p +
geom_col(color = "gray80")
p1
p2 <- p1 +
scale_y_discrete(
labels = as_labeller(f_labs))
p2
p3 <- p2 +
scale_x_continuous(
labels = scales::percent)
p3
p <- ggplot(
studebt,
aes(x = pct/100, y = type,
fill = Debtrc))
p1 <- p +
geom_col(color = "gray80")+
theme(legend.position = 'top')
p1
p2 <- p1 +
scale_y_discrete(
labels = as_labeller(f_labs))
p2
p3 <- p2 +
scale_x_continuous(
labels = scales::percent)
p3
p4 <- p3 +
scale_fill_viridis_d(
option = "B")
p4
p5 <- p4 +
guides(
fill =
guide_legend(
reverse = TRUE,
title.position = "top",
label.position = "bottom",
keywidth = 3,
nrow = 1))
p5
p6 <- p5 +
labs(x = NULL, y = NULL,
fill = "Amount Owed, in thousands of dollars",
caption = p_caption,
title = p_title,
subtitle = p_subtitle)
p6
p7 <- p6 +
theme(legend.position = "top",
axis.text.y =
element_text(
face = "bold",
hjust = 1,
size = 12),
axis.ticks.length =
unit(0, "cm"),
panel.grid.major.y =
element_blank())
p7
studebt <- socviz::studebt
